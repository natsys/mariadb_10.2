create or replace table t1 (id int);
create or replace table t2 (id int) with system versioning;

-- echo  # force cleaning table shares
flush tables t1, t2;

truncate table t1;
--error ER_TRUNCATE_ILLEGAL_VERS
truncate table t2;

-- echo # fetch table shares
describe t1;
describe t2;

truncate table t1;
--error ER_TRUNCATE_ILLEGAL_VERS
truncate table t2;

--echo # enter locked tables mode
lock tables t1 WRITE, t2 WRITE;

truncate t1;
--error ER_TRUNCATE_ILLEGAL_VERS
truncate t2;

unlock tables;

drop table t1;
drop table t2;

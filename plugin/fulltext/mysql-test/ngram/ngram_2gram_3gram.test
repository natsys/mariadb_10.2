# Test fulltext parsers "2gram" and "3gram".

CREATE TABLE t (str TEXT) Engine=InnoDB;
INSERT INTO t VALUES ('abcd efghijk lm n'), ('o p q rs tuv wxyz');

--echo # Try 2-grams.
ALTER TABLE t ADD FULLTEXT INDEX str_idx (str) WITH PARSER 2gram;

--echo # Single letter is too short to be a 2-gram.
SELECT str FROM t WHERE MATCH(str) AGAINST('b');
--echo # 'bc' is a valid 2gram.
SELECT str FROM t WHERE MATCH(str) AGAINST('bc');
--echo # 'tuv' is parsed into list ('tu', 'uv').
SELECT str FROM t WHERE MATCH(str) AGAINST('tuv');

ALTER TABLE t DROP INDEX str_idx;
--echo # Try 3-grams.
ALTER TABLE t ADD FULLTEXT INDEX str_idx (str) WITH PARSER 3gram;

--echo # Single letter is too short to be a 3-gram.
SELECT str FROM t WHERE MATCH(str) AGAINST('b');
--echo # Two letters are not enough to be considered a 3-gram.
SELECT str FROM t WHERE MATCH(str) AGAINST('bc');
--echo # 'tuv' is a valid 3-gram.
SELECT str FROM t WHERE MATCH(str) AGAINST('tuv');

DROP TABLE t;

